$schema: ../../../../agents/docs/flow.schema.json
version: 1
agent_paths:
  - ../../../../agents
  - ../../../../agents/main-agents/workflow-mag/src
  - ../../../../agents/main-agents/operations-mag/src
  - ../../../../agents/main-agents/qa-mag/src
  - ../../../../agents/sub-agents/docs-sag/src
  - ../../../../agents/sub-agents/prompt-sag/src
  - ../../../../agents/sub-agents/context-sag/src
  - ../../../../agents/sub-agents/quality-sag/src
  - ../../../../agents/sub-agents/reference-sag/src
  - ../../../../agents/sub-agents/browser-sag/src
  - ../../../../agents/sub-agents/governance-sag/src
  - ../../../../src
run:
  output_dir: telemetry/runs/${RUN_ID}
  env:
    WORKFLOW_CONFIG: ${WORKFLOW_CONFIG}
    MAG_RUN_ID: ${RUN_ID}
steps:
  - id: plan
    uses: flow_runner.tasks.workflow_mag.stages:PlanStage
  - id: browser
    needs: [plan]
    uses: flow_runner.tasks.workflow_mag.stages:BrowserStage
  - id: docs
    needs: [plan, browser]
    uses: flow_runner.tasks.workflow_mag.stages:DocsStage
  - id: prompts
    needs: [plan, browser]
    uses: flow_runner.tasks.workflow_mag.stages:PromptsStage
  - id: context
    needs: [prompts]
    uses: flow_runner.tasks.workflow_mag.stages:ContextStage
  - id: qa
    needs: [docs, context]
    uses: flow_runner.tasks.workflow_mag.stages:QAStage
  - id: operations
    needs: [qa]
    uses: flow_runner.tasks.workflow_mag.stages:OperationsStage
  - id: governance
    needs: [operations]
    uses: flow_runner.tasks.workflow_mag.stages:GovernanceStage
  - id: finalize
    needs: [governance]
    uses: flow_runner.tasks.workflow_mag.stages:FinalizeStage
